<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<view xmlns="http://jmix.io/schema/flowui/view"
      xmlns:calendar="http://jmix.io/schema/fullcalendar/ui"
      xmlns:pivot="http://jmix.io/schema/pvttbl/ui"
      title="msg://statisticsView.title">
    <data>
        <collection id="ordersDc" class="io.jmix.bookstore.order.entity.Order">
            <fetchPlan extends="_base">
                <property name="orderLines" fetch="JOIN" fetchPlan="_base"/>
                <property name="shippingAddress" fetchPlan="_base"/>
                <property name="fulfilledBy" fetchPlan="_base"/>
            </fetchPlan>
            <loader id="ordersDl" maxResults="50">
                <query>
                    <![CDATA[select e from bookstore_Order e]]>
                </query>
            </loader>
        </collection>
    </data>
    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>
    <layout>
        <pivot:pivotTable dataContainer="ordersDc" classNames="ordersPivotTable" width="100%">
            <pivot:properties>
                <pivot:property name="customerName"/>
                <pivot:property name="status"/>
                <pivot:property name="orderLinePrice"/>
            </pivot:properties>
            <pivot:aggregationProperties>
                <pivot:property name="status"/>
            </pivot:aggregationProperties>
            <pivot:rows>
                <pivot:row value="customerName"/>
                <pivot:row value="status"/>
                <pivot:row value="orderLinePrice"/>
            </pivot:rows>
            <pivot:columns>
                <pivot:column value="customerName"/>
                <pivot:column value="status"/>
                <pivot:column value="orderLinePrice"/>
            </pivot:columns>

            <pivot:renderers>
                <pivot:renderer type="TABLE"/>
                <pivot:renderer type="BAR_CHART"/>
            </pivot:renderers>
        </pivot:pivotTable>
    </layout>
</view>