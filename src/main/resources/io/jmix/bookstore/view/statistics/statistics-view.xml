<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<view xmlns="http://jmix.io/schema/flowui/view"
      xmlns:pivot="http://jmix.io/schema/pvttbl/ui"
      title="msg://statisticsView.title">
    <data>
        <collection id="ordersDc" class="io.jmix.bookstore.order.entity.Order">
            <fetchPlan extends="_base">
                <property name="orderLines" fetch="JOIN" fetchPlan="_base"/>
                <property name="fulfilledBy" fetchPlan="_base"/>
            </fetchPlan>
            <loader id="ordersDl" maxResults="50">
                <query>
                    <![CDATA[select e from bookstore_Order e]]>
                </query>
            </loader>
        </collection>
    </data>
    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>
    <layout>
        <pivot:pivotTable dataContainer="ordersDc" classNames="ordersPivotTable"
                          width="100%" showUI="true">
            <pivot:properties>
                <pivot:property name="customerName"/>
                <pivot:property name="status"/>
                <pivot:property name="orderDateMonth"/>
                <pivot:property name="orderLinePrice"/>
                <pivot:property name="fulfilmentCenterName"/>
                <pivot:property name="shippingAddressText"/>
            </pivot:properties>
            <pivot:aggregations default="MAXIMUM"/>
            <pivot:rows>
                <pivot:row value="msg://io.jmix.bookstore.order.entity/Order.orderDateMonth"/>
            </pivot:rows>
            <pivot:columns>
                <pivot:column value="msg://io.jmix.bookstore.order.entity/Order.status"/>
                <pivot:column value="msg://io.jmix.bookstore.order.entity/Order.customerName"/>
            </pivot:columns>
        </pivot:pivotTable>
    </layout>
</view>